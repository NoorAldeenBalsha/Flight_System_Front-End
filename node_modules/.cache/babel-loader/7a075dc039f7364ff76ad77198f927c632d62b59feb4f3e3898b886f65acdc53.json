{"ast":null,"code":"import React,{useReducer}from\"react\";import AuthContext from\"./authContext\";import AuthReducer from\"./authReducer\";import api from\"../../api\";import axios from\"axios\";const AuthState=props=>{const initialState={token:localStorage.getItem(\"token\"),isAuthenticated:false,user:null,error:null};const[state,dispatch]=useReducer(AuthReducer,initialState);// Register\nconst register=async formData=>{try{const res=await api.post(\"/api/user/auth/register\",formData);dispatch({type:\"REGISTER_SUCCESS\",payload:res.data});localStorage.setItem(\"token\",res.data.access_token);}catch(err){dispatch({type:\"REGISTER_FAIL\",payload:err.response.data});}};// Login\nconst login=async formData=>{try{const res=await api.post(\"/api/user/auth/login\",formData);dispatch({type:\"LOGIN_SUCCESS\",payload:res.data});localStorage.setItem(\"token\",res.data.access_token);}catch(err){dispatch({type:\"LOGIN_FAIL\",payload:err.response.data});}};// Logout\nconst logout=()=>{localStorage.removeItem(\"token\");dispatch({type:\"LOGOUT\"});};return/*#__PURE__*/React.createElement(AuthContext.Provider,{value:{token:state.token,isAuthenticated:state.isAuthenticated,user:state.user,error:state.error,register,login,logout}},props.children);};export default AuthState;","map":{"version":3,"names":["React","useReducer","AuthContext","AuthReducer","api","axios","AuthState","props","initialState","token","localStorage","getItem","isAuthenticated","user","error","state","dispatch","register","formData","res","post","type","payload","data","setItem","access_token","err","response","login","logout","removeItem","createElement","Provider","value","children"],"sources":["C:/Users/ASUS/Desktop/Login/src/context/auth/authState.js"],"sourcesContent":["import React, { useReducer } from \"react\";\r\nimport AuthContext from \"./authContext\";\r\nimport AuthReducer from \"./authReducer\";\r\nimport api from \"../../api\";\r\nimport axios from \"axios\";\r\n\r\nconst AuthState = (props) => {\r\n  const initialState = {\r\n    token: localStorage.getItem(\"token\"),\r\n    isAuthenticated: false,\r\n    user: null,\r\n    error: null,\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(AuthReducer, initialState);\r\n\r\n  // Register\r\n  const register = async (formData) => {\r\n    try {\r\n      const res = await api.post(\"/api/user/auth/register\", formData);\r\n      dispatch({ type: \"REGISTER_SUCCESS\", payload: res.data });\r\n      localStorage.setItem(\"token\", res.data.access_token);\r\n    } catch (err) {\r\n      dispatch({ type: \"REGISTER_FAIL\", payload: err.response.data });\r\n    }\r\n  };\r\n\r\n  // Login\r\n  const login = async (formData) => {\r\n    try {\r\n      const res = await api.post(\"/api/user/auth/login\", formData);\r\n      dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\r\n      localStorage.setItem(\"token\", res.data.access_token);\r\n    } catch (err) {\r\n      dispatch({ type: \"LOGIN_FAIL\", payload: err.response.data });\r\n    }\r\n  };\r\n\r\n  // Logout\r\n  const logout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    dispatch({ type: \"LOGOUT\" });\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        token: state.token,\r\n        isAuthenticated: state.isAuthenticated,\r\n        user: state.user,\r\n        error: state.error,\r\n        register,\r\n        login,\r\n        logout,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthState;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,KAAQ,OAAO,CACzC,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,MAAO,CAAAC,GAAG,KAAM,WAAW,CAC3B,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,SAAS,CAAIC,KAAK,EAAK,CAC3B,KAAM,CAAAC,YAAY,CAAG,CACnBC,KAAK,CAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACpCC,eAAe,CAAE,KAAK,CACtBC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,IACT,CAAC,CAED,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGf,UAAU,CAACE,WAAW,CAAEK,YAAY,CAAC,CAE/D;AACA,KAAM,CAAAS,QAAQ,CAAG,KAAO,CAAAC,QAAQ,EAAK,CACnC,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAf,GAAG,CAACgB,IAAI,CAAC,yBAAyB,CAAEF,QAAQ,CAAC,CAC/DF,QAAQ,CAAC,CAAEK,IAAI,CAAE,kBAAkB,CAAEC,OAAO,CAAEH,GAAG,CAACI,IAAK,CAAC,CAAC,CACzDb,YAAY,CAACc,OAAO,CAAC,OAAO,CAAEL,GAAG,CAACI,IAAI,CAACE,YAAY,CAAC,CACtD,CAAE,MAAOC,GAAG,CAAE,CACZV,QAAQ,CAAC,CAAEK,IAAI,CAAE,eAAe,CAAEC,OAAO,CAAEI,GAAG,CAACC,QAAQ,CAACJ,IAAK,CAAC,CAAC,CACjE,CACF,CAAC,CAED;AACA,KAAM,CAAAK,KAAK,CAAG,KAAO,CAAAV,QAAQ,EAAK,CAChC,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAf,GAAG,CAACgB,IAAI,CAAC,sBAAsB,CAAEF,QAAQ,CAAC,CAC5DF,QAAQ,CAAC,CAAEK,IAAI,CAAE,eAAe,CAAEC,OAAO,CAAEH,GAAG,CAACI,IAAK,CAAC,CAAC,CACtDb,YAAY,CAACc,OAAO,CAAC,OAAO,CAAEL,GAAG,CAACI,IAAI,CAACE,YAAY,CAAC,CACtD,CAAE,MAAOC,GAAG,CAAE,CACZV,QAAQ,CAAC,CAAEK,IAAI,CAAE,YAAY,CAAEC,OAAO,CAAEI,GAAG,CAACC,QAAQ,CAACJ,IAAK,CAAC,CAAC,CAC9D,CACF,CAAC,CAED;AACA,KAAM,CAAAM,MAAM,CAAGA,CAAA,GAAM,CACnBnB,YAAY,CAACoB,UAAU,CAAC,OAAO,CAAC,CAChCd,QAAQ,CAAC,CAAEK,IAAI,CAAE,QAAS,CAAC,CAAC,CAC9B,CAAC,CAED,mBACErB,KAAA,CAAA+B,aAAA,CAAC7B,WAAW,CAAC8B,QAAQ,EACnBC,KAAK,CAAE,CACLxB,KAAK,CAAEM,KAAK,CAACN,KAAK,CAClBG,eAAe,CAAEG,KAAK,CAACH,eAAe,CACtCC,IAAI,CAAEE,KAAK,CAACF,IAAI,CAChBC,KAAK,CAAEC,KAAK,CAACD,KAAK,CAClBG,QAAQ,CACRW,KAAK,CACLC,MACF,CAAE,EAEDtB,KAAK,CAAC2B,QACa,CAAC,CAE3B,CAAC,CAED,cAAe,CAAA5B,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}