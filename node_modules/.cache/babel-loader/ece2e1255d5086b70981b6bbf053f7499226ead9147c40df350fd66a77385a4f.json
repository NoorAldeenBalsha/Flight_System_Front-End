{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\Login\\\\src\\\\context\\\\auth\\\\authState.js\",\n  _s = $RefreshSig$();\nimport React, { useReducer } from \"react\";\nimport AuthContext from \"./authContext\";\nimport AuthReducer from \"./authReducer\";\nimport api from \"../../api\";\nimport axios from \"axios\";\nconst AuthState = props => {\n  _s();\n  const initialState = {\n    token: localStorage.getItem(\"token\"),\n    isAuthenticated: false,\n    user: null,\n    error: null\n  };\n  const [state, dispatch] = useReducer(AuthReducer, initialState);\n\n  // Register\n  const register = async formData => {\n    try {\n      const res = await api.post(\"/api/user/auth/register\", formData);\n      dispatch({\n        type: \"REGISTER_SUCCESS\",\n        payload: res.data\n      });\n      localStorage.setItem(\"token\", res.data.access_token);\n    } catch (err) {\n      dispatch({\n        type: \"REGISTER_FAIL\",\n        payload: err.response.data\n      });\n    }\n  };\n\n  // Login\n  const login = async formData => {\n    try {\n      const res = await api.post(\"/api/user/auth/login\", formData);\n      dispatch({\n        type: \"LOGIN_SUCCESS\",\n        payload: res.data\n      });\n      localStorage.setItem(\"token\", res.data.access_token);\n    } catch (err) {\n      dispatch({\n        type: \"LOGIN_FAIL\",\n        payload: err.response.data\n      });\n    }\n  };\n\n  // Logout\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    dispatch({\n      type: \"LOGOUT\"\n    });\n  };\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: {\n      token: state.token,\n      isAuthenticated: state.isAuthenticated,\n      user: state.user,\n      error: state.error,\n      register,\n      login,\n      logout\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n_s(AuthState, \"6JWkGZ32UPfojeNx+xqn8ZU8A0Q=\");\n_c = AuthState;\nexport default AuthState;\nvar _c;\n$RefreshReg$(_c, \"AuthState\");","map":{"version":3,"names":["React","useReducer","AuthContext","AuthReducer","api","axios","AuthState","props","_s","initialState","token","localStorage","getItem","isAuthenticated","user","error","state","dispatch","register","formData","res","post","type","payload","data","setItem","access_token","err","response","login","logout","removeItem","createElement","Provider","value","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","children","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Desktop/Login/src/context/auth/authState.js"],"sourcesContent":["import React, { useReducer } from \"react\";\r\nimport AuthContext from \"./authContext\";\r\nimport AuthReducer from \"./authReducer\";\r\nimport api from \"../../api\";\r\nimport axios from \"axios\";\r\n\r\nconst AuthState = (props) => {\r\n  const initialState = {\r\n    token: localStorage.getItem(\"token\"),\r\n    isAuthenticated: false,\r\n    user: null,\r\n    error: null,\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(AuthReducer, initialState);\r\n\r\n  // Register\r\n  const register = async (formData) => {\r\n    try {\r\n      const res = await api.post(\"/api/user/auth/register\", formData);\r\n      dispatch({ type: \"REGISTER_SUCCESS\", payload: res.data });\r\n      localStorage.setItem(\"token\", res.data.access_token);\r\n    } catch (err) {\r\n      dispatch({ type: \"REGISTER_FAIL\", payload: err.response.data });\r\n    }\r\n  };\r\n\r\n  // Login\r\n  const login = async (formData) => {\r\n    try {\r\n      const res = await api.post(\"/api/user/auth/login\", formData);\r\n      dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\r\n      localStorage.setItem(\"token\", res.data.access_token);\r\n    } catch (err) {\r\n      dispatch({ type: \"LOGIN_FAIL\", payload: err.response.data });\r\n    }\r\n  };\r\n\r\n  // Logout\r\n  const logout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    dispatch({ type: \"LOGOUT\" });\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        token: state.token,\r\n        isAuthenticated: state.isAuthenticated,\r\n        user: state.user,\r\n        error: state.error,\r\n        register,\r\n        login,\r\n        logout,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthState;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,SAAS,GAAIC,KAAK,IAAK;EAAAC,EAAA;EAC3B,MAAMC,YAAY,GAAG;IACnBC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACpCC,eAAe,EAAE,KAAK;IACtBC,IAAI,EAAE,IAAI;IACVC,KAAK,EAAE;EACT,CAAC;EAED,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,UAAU,CAACE,WAAW,EAAEM,YAAY,CAAC;;EAE/D;EACA,MAAMS,QAAQ,GAAG,MAAOC,QAAQ,IAAK;IACnC,IAAI;MACF,MAAMC,GAAG,GAAG,MAAMhB,GAAG,CAACiB,IAAI,CAAC,yBAAyB,EAAEF,QAAQ,CAAC;MAC/DF,QAAQ,CAAC;QAAEK,IAAI,EAAE,kBAAkB;QAAEC,OAAO,EAAEH,GAAG,CAACI;MAAK,CAAC,CAAC;MACzDb,YAAY,CAACc,OAAO,CAAC,OAAO,EAAEL,GAAG,CAACI,IAAI,CAACE,YAAY,CAAC;IACtD,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZV,QAAQ,CAAC;QAAEK,IAAI,EAAE,eAAe;QAAEC,OAAO,EAAEI,GAAG,CAACC,QAAQ,CAACJ;MAAK,CAAC,CAAC;IACjE;EACF,CAAC;;EAED;EACA,MAAMK,KAAK,GAAG,MAAOV,QAAQ,IAAK;IAChC,IAAI;MACF,MAAMC,GAAG,GAAG,MAAMhB,GAAG,CAACiB,IAAI,CAAC,sBAAsB,EAAEF,QAAQ,CAAC;MAC5DF,QAAQ,CAAC;QAAEK,IAAI,EAAE,eAAe;QAAEC,OAAO,EAAEH,GAAG,CAACI;MAAK,CAAC,CAAC;MACtDb,YAAY,CAACc,OAAO,CAAC,OAAO,EAAEL,GAAG,CAACI,IAAI,CAACE,YAAY,CAAC;IACtD,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZV,QAAQ,CAAC;QAAEK,IAAI,EAAE,YAAY;QAAEC,OAAO,EAAEI,GAAG,CAACC,QAAQ,CAACJ;MAAK,CAAC,CAAC;IAC9D;EACF,CAAC;;EAED;EACA,MAAMM,MAAM,GAAGA,CAAA,KAAM;IACnBnB,YAAY,CAACoB,UAAU,CAAC,OAAO,CAAC;IAChCd,QAAQ,CAAC;MAAEK,IAAI,EAAE;IAAS,CAAC,CAAC;EAC9B,CAAC;EAED,oBACEtB,KAAA,CAAAgC,aAAA,CAAC9B,WAAW,CAAC+B,QAAQ;IACnBC,KAAK,EAAE;MACLxB,KAAK,EAAEM,KAAK,CAACN,KAAK;MAClBG,eAAe,EAAEG,KAAK,CAACH,eAAe;MACtCC,IAAI,EAAEE,KAAK,CAACF,IAAI;MAChBC,KAAK,EAAEC,KAAK,CAACD,KAAK;MAClBG,QAAQ;MACRW,KAAK;MACLC;IACF,CAAE;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAEDjC,KAAK,CAACkC,QACa,CAAC;AAE3B,CAAC;AAACjC,EAAA,CArDIF,SAAS;AAAAoC,EAAA,GAATpC,SAAS;AAuDf,eAAeA,SAAS;AAAC,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}